<!doctype html>
<html lang="en" ng-app="valentineApp">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you be my Valentine?</title>
  <link href="https://fonts.googleapis.com/css2?family=Miracle:wght@400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>
</head>
<body ng-controller="MainCtrl">
  <main class="card">

    <!-- Landing / Gift scene -->
    <section class="scene landing" ng-show="scene==='landing'">
      <div class="top">
        <h1>Hey my love</h1>
        <p class="subtitle">I have a little gift for you â€” tap to open</p>
      </div>
      <div class="gift" ng-click="openGift()">
        <img src="giftbox.jpg" alt="Gift box" class="giftbox-img">
        <div class="tap">TAP TO OPEN</div>
      </div>
    </section>

    <!-- Question scene (Yes/No with moving NO) -->
    <section class="scene question" ng-show="scene==='question'">
      <div class="top">
        <h1>Will you be my Valentine?</h1>
        <p class="subtitle">I made this just for you ğŸ’–</p>
      </div>

      <div class="center">
        <img src="teadybear.jpg" alt="Teddy bear" class="doll-img">
      </div>

      <div class="choices" id="playArea">
        <button class="yes" ng-click="accept()" ng-disabled="accepted">YES</button>
        <button class="no" id="noButton" ng-mouseenter="moveNoButton()" ng-click="moveNoButton()">NO</button>
      </div>

      <div class="message" ng-if="message">{{message}}</div>
    </section>

    <!-- Why scene - ask for reason -->
    <section class="scene why-scene" ng-show="scene==='why'">
      <div class="top">
        <h1>Tell me why ğŸ˜</h1>
        <p class="subtitle">Give me ONE reason why you want to be my valentine...</p>
      </div>
      <div class="why-container">
        <input type="text" class="why-input" ng-model="whyReason" placeholder="Type your reason here..." ng-keyup="$event.keyCode === 13 && saveReason()">
        <button class="why-button" ng-click="saveReason()">Submit Reason ğŸ’­</button>
      </div>
      <div class="reasons-list" ng-if="reasons.length > 0">
        <h3>Your reasons so far:</h3>
        <div class="reason-item" ng-repeat="reason in reasons">
          âœ¨ {{reason}}
        </div>
      </div>
    </section>

    <!-- Blocked scene removed; only Yes path remains -->

    <!-- Gift choice scene -->
    <section class="scene gift-choice" ng-show="scene==='gift-choice'">
      <div class="top">
        <h1>Choose a gift</h1>
        <p class="subtitle">Pick your favorite ğŸ’–</p>
      </div>
      <div class="gift-grid">
        <img src="love%20letter.jpg" alt="Love letter" class="gift-item-img" ng-click="selectGift('letter')">
        <img src="camera.jpg" alt="Camera" class="gift-item-img" ng-click="selectGift('photo')">
        <img src="Voucher.jpg" alt="Voucher" class="gift-item-img" ng-click="selectGift('voucher')">
        <img src="clock.jpg" alt="Clock" class="gift-item-img" ng-click="selectGift('clock')">
      </div>
    </section>

    <!-- Voucher scene -->
    <section class="scene voucher" ng-show="scene==='voucher'">
      <div class="top">
        <h1>Vouchers</h1>
        <p class="subtitle">Redeem one of these special treats ğŸ’</p>
      </div>
      <div class="voucher-grid">
        <div class="ticket" ng-repeat="v in voucherList">
          <div class="ticket-left">
            <h3>{{v.title}}</h3>
            <p>{{v.description}}</p>
          </div>
          <div class="ticket-sep"></div>
          <div class="ticket-right" ng-class="{redeemed: redeemed[v.id]}" ng-click="redeem(v.id)" ng-disabled="redeemed[v.id]">
            <span ng-if="!redeemed[v.id]">Redeem</span>
            <span ng-if="redeemed[v.id]">Redeemed</span>
          </div>
        </div>
      </div>
      <button class="back-btn" ng-click="goTo('gift-choice')">â† Back</button>
    </section>

    <!-- Photo gallery scene -->
    <section class="scene photo-gallery" ng-show="scene==='photo-gallery'">
      <div class="top">
        <h1>Our Journey Together ğŸ’«</h1>
        <p class="subtitle">HOW IT ALL BEGAN</p>
      </div>
      <div class="gallery-container">
        <img src="camera/WhatsApp%20Image%202026-01-31%20at%203.42.07%20PM.jpeg" alt="Photo 1" class="gallery-item" ng-click="openLightbox('camera/WhatsApp%20Image%202026-01-31%20at%203.42.07%20PM.jpeg')">
        <img src="camera/imagge%202.jpeg" alt="Photo 2" class="gallery-item" ng-click="openLightbox('camera/imagge%202.jpeg')">
        <img src="camera/WhatsApp%20Image%202026-01-31%20at%203.42.04%20PM.jpeg" alt="Photo 3" class="gallery-item" ng-click="openLightbox('camera/WhatsApp%20Image%202026-01-31%20at%203.42.04%20PM.jpeg')">
        <img src="camera/WhatsApp%20Image%202026-01-31%20at%203.42.05%20PM.jpeg" alt="Photo 4" class="gallery-item" ng-click="openLightbox('camera/WhatsApp%20Image%202026-01-31%20at%203.42.05%20PM.jpeg')">
        <video controls autoplay muted loop class="gallery-video" ng-click="openLightbox('camera/WhatsApp%20Video%202026-01-31%20at%203.42.07%20PM.mp4')">
          <source src="camera/WhatsApp%20Video%202026-01-31%20at%203.42.07%20PM.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>
      <button class="back-btn" ng-click="goTo('gift-choice')">â† Back</button>
    </section>

    <!-- Love letter scene -->
    <section class="scene love-letter" ng-show="scene==='love-letter'">
      <div class="letter-wrap">
        <div class="torn left">
          <div class="torn-inner">
            <p class="t-text">My Love,

Every moment with you feels like a beautiful dream I never want to wake up from. The way you smile, the way you laugh, the way you make my heart skip a beat with just a simple glanceâ€”these are the things that make my days brighter.

You've brought so much light into my life, and I can't imagine a future without you in it. Thank you for being the most wonderful person, for loving me unconditionally, and for making every day an adventure. You are my greatest blessing. ğŸ’•</p>
          </div>
        </div>

        <div class="torn right">
          <div class="torn-inner">
            <p class="t-text">My Beautiful Valentine,

I fell in love with you because of a thousand little thingsâ€”your kindness, your strength, the way you care for others, and most importantly, the way you make me believe in love.

You are my safe place, my home, my everything. In a world that can be so cold, you are my warmth. With you, I've found a love that feels like coming home after being lost for so long. I promise to cherish you forever. ğŸŒ¹</p>
          </div>
        </div>

        <div class="small-note">These words are just a fraction of how much you mean to me ğŸ’Œ</div>
      </div>
      <button class="back-btn" ng-click="goTo('gift-choice')">â† Back</button>
    </section>
    <!-- Redeem modal -->
    <div class="redeem-modal" ng-show="redeemModal.open" ng-click="closeRedeemModal()">
      <div class="redeem-inner" ng-click="$event.stopPropagation()">
        <h3>{{redeemModal.title}}</h3>
        <p>{{redeemModal.message}}</p>
        <button class="back-btn" ng-click="closeRedeemModal()">Close</button>
      </div>
    </div>

    <!-- Lightbox modal -->
    <div class="lightbox" ng-show="lightboxOpen" ng-click="closeLightbox()">
      <div class="lightbox-content" ng-click="$event.stopPropagation()">
        <span class="lightbox-close" ng-click="closeLightbox()">&times;</span>
        <img ng-if="!isVideo(selectedImage)" src="{{selectedImage}}" alt="Full size" class="lightbox-image">
        <video ng-if="isVideo(selectedImage)" controls class="lightbox-video">
          <source src="{{selectedImage}}" type="video/mp4">
        </video>
      </div>
    </div>

    <!-- Accepted result -->
    <section class="scene accepted" ng-show="scene==='accepted'">
      <h2>Yay! ğŸ’</h2>
      <p>You're my Valentine!</p>
    </section>

    <footer class="hint">
      Made with love â€” customize me for your special someone.
      <button class="restart-btn" ng-click="goTo('landing')" ng-show="scene !== 'landing'">â†» Restart</button>
    </footer>
  </main>

  <script src="script.js"></script>
</body>
</html>